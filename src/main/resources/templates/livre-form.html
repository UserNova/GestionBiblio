<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title>Nouveau livre</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" />
</head>
<body class="bg-light">
<div th:replace="fragments/navbar :: navbar"></div>
<div class="container py-4">
    <h1 class="mb-4" th:text="${livre.id} != null ? 'Modifier livre' : 'Nouveau livre'"></h1>
    <form th:action="${livre.id} != null ? @{/livres/{id}(id=${livre.id})} : @{/livres}" method="post">
        <div class="row g-3">
            <div class="col-md-6">
                <label class="form-label">Titre</label>
                <input class="form-control" type="text" name="titre" th:value="${livre.titre}" required />
            </div>
            <div class="col-md-6">
                <label class="form-label">ISBN</label>
                <input class="form-control" type="text" name="isbn" th:value="${livre.isbn}" />
            </div>
            <div class="col-md-4">
                <label class="form-label">Catégorie</label>
                <input class="form-control" type="text" name="categorie" th:value="${livre.categorie}" />
            </div>
            <div class="col-md-4">
                <label class="form-label">Date parution</label>
                <input class="form-control" type="date" name="dateParution" th:value="${livre.dateParution}" />
            </div>
            <div class="col-md-4">
                <label class="form-label">Disponible</label>
                <select class="form-select" name="disponible">
                    <option th:value="true" th:selected="${livre.disponible == true}">Oui</option>
                    <option th:value="false" th:selected="${livre.disponible == false}">Non</option>
                </select>
            </div>
            <div class="col-md-6">
                <label class="form-label">Auteur</label>
                <select class="form-select" name="auteurId">
                    <option value="">—</option>
                    <option th:each="a : ${auteurs}" th:value="${a.id}" th:text="${a.nom}"
                            th:selected="${livre.auteur != null} ? ${a.id} == ${livre.auteur.id} : false"></option>
                </select>
            </div>
        </div>
        <div class="mt-3 d-flex gap-2">
            <button class="btn btn-primary" type="submit">Enregistrer</button>
            <a class="btn btn-secondary" th:href="@{/livres}">Annuler</a>
        </div>
    </form>
    </div>
</body>
</html>



